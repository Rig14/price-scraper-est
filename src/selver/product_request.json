{
    "query": {
        "bool": {
            "filter": {
                "bool": {
                    "must": [
                        {
                            "terms": {
                                "visibility": [
                                    2,
                                    3,
                                    4
                                ]
                            }
                        },
                        {
                            "terms": {
                                "status": [
                                    0,
                                    1
                                ]
                            }
                        },
                        {
                            "terms": {
                                "category_ids": []
                            }
                        }
                    ]
                }
            }
        }
    },
    "aggs": {
        "agg_terms_product_main_ecategory": {
            "terms": {
                "field": "product_main_ecategory",
                "size": 100
            }
        }
    }
}